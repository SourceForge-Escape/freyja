;; -*- Mode: Lisp; tab-width: 4; indent-tabs-mode: t -*-
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; Project: Freyja
; Author : Terry 'Mongoose' Hendrix II
; Website: http://gooseegg.sourceforge.net
; Email  : mongoose@users.sourceforge.net
; Comment: This is a sample resource Freyja file
;
;;;History;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; 2001.10.31
; Mongoose - New implementation uses this as the
;            main resource file
;
; ????.??.??
; Mongoose - Created as metadata for gtk-menu
;            script prototype
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; Misc defines and varabiles
(setq true 1)
(setq false 0)

;; Program defaults
(setq WINDOW_X 32)             ; Offset of the window on load
(setq WINDOW_Y 32)

(setq WIDTH  663);700)         ; Set GL window width and height
(setq HEIGHT 640)

(setq NOTEBOOK_WIDTH 340)      ; Set sidebar notebook width and height
(setq NOTEBOOK_HEIGHT HEIGHT)

(setq DUMP_SYMTAB false)       ; Toggle symbol table dumping
(setq FAST_CARD true)          ; Toggle OpenGL accel features
(setq GRID_ON true)            ; Toggle edit grid rendering
(setq PATH "~/.freyja")        ; Set initial data path

;(setq INIT "~/.freyja/init-dev.mlisp")

;; Gtk+ Interface
;::::::::::::::::::::::::::::::::::::::::::::::::::::::
; (textbox "text" EVENT COMMAND)
; (option_menu (menu_item "label"  EVENT COMMAND))
; (togglebutton "label" pressed EVENT COMMAND)
; (button "label" EVENT COMMAND)
; (vbox homogenous spacing expand fill pading ...)
; (hbox homogenous spacing expand fill pading ...)
; (hslider EVENT min max)
; (icon filename/iconname IconSize_*)
	; IconSize_Menu
	; IconSize_ToolbarSmall
	; IconSize_Toolbar
	; IconSize_Button
	; IconSize_Dialog
;(filechoosermenu_item "label" "dialog title" ["key"] eEvent "special" "icon")
	;; Special file chooser options
	; mode=create-folder|select-folder|(open)|save  
    ; confirm-overwrite=true|(false)

;; Application Window
(window "Freyja" "freyja.png"

	;; Window container
	(vbox 0 0 0 1 0

	;; Menubar
	(handlebox 1
	(menubar
		(submenu "_File"
			(menu_item "_New"			"C-n"	eNewFile	"gtk-new")
			(filechoosermenu_item "_Open Model..."	"Open Model..."	"C-o"	eOpenModel	"mode=open"	"gtk-open")
			(menu_item "Ap_pend Model..."  		eAppendFile		"gtk-paste")

			(menu_seperator)

			(submenu eRecentFiles "R_ecent Models...")			

			(menu_seperator)

			(menu_item "_Save Model"	"C-s"	eSaveFileModel	"gtk-save")
			(filechoosermenu_item "Save Model _As..."	"Save Model..."	"S-C-s"	eSaveModel	"mode=save,confirm-overwrite=true,"	"gtk-save-as")
			(menu_item "_Revert Model"		eRevertFile	"gtk-revert-to-saved")
			(menu_seperator)

			(menu_item "Proper_ties"		eInfo		"gtk-properties")
			(menu_item "_Import"		"C-i"	eImportFile	"gtk-go-forward")
			(menu_item "_Export"		"C-e"	eExportFile	"gtk-go-back")

			(menu_seperator)

			(menu_item "_Close"		"C-w"	eCloseFile	"gtk-close")
			(menu_item "_Quit"			"C-q"	eShutdown	"gtk-quit"))


		(submenu "_Edit"
			(menu_item "Take _Screenshot"		eScreenShot	"gtk-screenshot")
			(menu_seperator)
			(menu_item "_Undo"			"C-z"	eUndo		"gtk-undo")
			(menu_item "_Redo"			"S-C-z"	eRedo		"gtk-redo")
			(menu_seperator)
			(menu_item "Cu_t"     		"C-x"	eCut		"gtk-cut")
			(menu_item "_Copy" 	    "C-c"	eCopy		"gtk-copy")
			(menu_item "_Paste"     	"C-v"	ePaste		"gtk-paste")
			(menu_item "_Delete"    	"C-d"	eDelete		"gtk-delete")
			(menu_seperator)
			(menu_item "Select _All"	"C-a"	eSelectAll	"gtk-select-table")
			(menu_seperator)
			(menu_item "Pr_eferences"    ePreferencesDialog	"gtk-preferences"))


		(submenu "_View"
			(menu_seperator)
			(menu_item "_Fullscreen"	"M-E"	eFullscreen	"gtk-fullscreen")
			(toggle_menu_item	"_Viewports"	eViewports	0)
			(menu_seperator)
			(toggle_menu_item	"_Grid"			eRenderGrid	1)
			;;(menu_item "_Grid ZBuffer"	eRenderToggleGridZClear	"gtk-blanked")
			;(menu_item "_Camera"		eEvent	eCamera)
			;(menu_item "P_atch"			eEvent	eRenderPatch)
			(submenu "_Mesh"
				(toggle_menu_item	"_Points"		eRenderVertex	0)
				(toggle_menu_item	"_Wireframe"	eRenderWireframe	0)
				(toggle_menu_item	"_Normals"		eRenderNormals	0)
				(toggle_menu_item	"_Faces"		eRenderFace		1)
				(toggle_menu_item	"_Texture"		eRenderTexture	1)
				(toggle_menu_item	"_Lighting"		eRenderLighting	1)
				(toggle_menu_item	"_Material"		eRenderMaterial	1)
				(toggle_menu_item	"_Bounding Volume"	eRenderBbox 1)
			) ; End submenu "_Mesh"

			(toggle_menu_item	"_Skeleton"	eRenderSkeleton	1)

			(toggle_menu_item	"_Pick Ray"	eRenderPickRay	1)

			(submenu "_Joint"
				(toggle_menu_item	"_Point"	ePointJoint		1)
				(toggle_menu_item	"_Sphere"	eSphereJoint	0)
				(toggle_menu_item	"_Axes"		eAxisJoint		0))

			(submenu "_Bone"
				(toggle_menu_item "_ZBuffer"	eRenderToggleBoneZClear	0)
				(toggle_menu_item "_Line"		eLineBone		1)
				(toggle_menu_item "_PolyMesh" 	ePolyMeshBone	0))
		) ; End submenu "_View"

		(submenu "_Create" 
				(submenu "_Componets"
						(menu_item "_Vertex"		eEvent  eVertexNew)
						(menu_item "_Face"			eEvent  ePolygonNew)
						(menu_item "_Mesh"			eEvent	eMeshNew)
						(menu_seperator)
						(menu_item "_Bone"			eEvent  eBoneNew)
				)

				(submenu "P_olygon Primatives"
					(menu_item "_Cube"		eGenerateCube		"gtk-cube")
					(menu_item "_Plane"	eGeneratePlane		"gtk-plane")
					(menu_item "_Tube"		eGenerateTube		"gtk-tube")
					(menu_item "C_ircle"	eGenerateCircle		"gtk-circle")
					(menu_item "C_one"		eGenerateCone		"gtk-cone")
					(menu_item "C_ylinder"	eGenerateCylinder	"gtk-cylinder")
					(menu_item "_Sphere"	eGenerateSphere		"gtk-sphere")
				)
		) ;; End submenu Create


		(submenu "_Modify"

			;; Transforms
			(submenu "_Transforms"
				(menu_item "Move"		"F5"	eMoveObject		"gtk-move")
				(menu_item "Rotate"	"F6"	eRotateObject	"gtk-rotate")
				(menu_item "Scale"		"F7"	eScaleObject	"gtk-scale")
				(menu_item "Select"	"F8"	eSelect			"gtk-select")
				(menu_item "Unselect"	"F9"	eUnselect		"gtk-unselect")
			)

			(submenu "_UV Mapping"
				(menu_item "_Planar"		CMD_MISC_GEN_TEXMAP_XY	"gtk-uv")
				(menu_item "_Cylindrical"	eMeshTexcoordCylindrical	"gtk-uv")
				(menu_item "_Spherical"	eMeshTexcoordSpherical	"gtk-uv"))

			(menu_seperator)

			(submenu "_Vertex"
				;(menu_item "_New"		eEvent  eVertexNew)
				(menu_item "_Delete"	eEvent  eVertexDelete)
				(menu_item "_Combine"	eEvent  eVertexCombine)
				;(menu_item "_Extrude"	eEvent  eVertexExtrude)
			)

			(submenu "V_ertices..."
				(menu_item "_Unselect" eEvent	eMeshUnselectVertices)
				(menu_item "_Delete"	eEvent	eNone);eSelectedVertsDelete)
				(menu_item "Mirror _X"	eEvent	eMeshMirrorX)
				(menu_item "Mirror _Y"	eEvent	eMeshMirrorY)
				(menu_item "Mirror _Z"	eEvent	eMeshMirrorZ))

			(submenu "_Face"
				;(menu_item "_New"		eEvent	ePolygonNew)
				(menu_item "_Select"	eEvent	ePolygonSelect)
				(menu_item "_Delete"	eEvent	ePolygonDelete)
				(menu_item "_Split"	eEvent	ePolygonSplit)
				(menu_item "_Collapse"	eEvent	eCollapseFace)
				(menu_item "_Extrude"	"F4"	eExtrude	"gtk-polygon"))

			(submenu "F_aces..."
				(menu_item "_Unselect faces"	eEvent	eMeshUnselectFaces)
				(menu_item "_Delete"	eEvent	eNone));eSelectedFacesDelete))

			(submenu "_Mesh"

				;(menu_item "_New"		eEvent	eMeshNew)
				(menu_item "_Select"	eEvent	eMeshSelect)
				(menu_item "_Delete"	eEvent	eMeshDelete)
				(menu_item "_Tesselate"	eEvent	eMeshTesselate)
				(menu_item "_Generate Normals"	eEvent	eMeshGenerateNormals)
				(menu_item "_Flip Normals"	eEvent	eMeshFlipNormals)

			) ; submenu _Mesh

			(submenu "_Bone"
				;(menu_item "_New"		eEvent	eBoneNew)
				(menu_item "_Delete"	eEvent	eNone)
				(menu_item "_Select"	eEvent	eBoneSelect)
				(menu_item "_Parent"	eEvent	eBoneLinkChild)
				(menu_item "_Unparent"	eEvent	eBoneUnLinkChild)
				;old (menu_item "L_ink mesh"	eEvent	eBoneLinkMesh)
				;old (menu_item "U_nlink mesh"	eEvent	eBoneUnLinkMesh)
				;(menu_item "_Move"			eEvent	eBoneMoveJoint)
			)

		) ; submenu "_Modify"

		(submenu ePluginMenu "_Plugins...")

		(menu_seperator)

		(submenu "_Help"
			(menu_item "_Contents"	"F1"	eHelpDialog	"gtk-help")
			(menu_item "_About"  			eAboutDialog "gtk-about"))))


		;; Toolbars
		(vbox 0 1 0 1 0
		(hbox 0 0 0 0 0
		(notebook 0 0 eNop

		(tab "View" eNone
			(toolbar
				(toolbar_togglebutton false "24x24/point.png" "Points" 
					"Point render mode"		eEvent	eRenderVertex)

				(toolbar_togglebutton false "24x24/wireframe.png" "Wireframe" 
					"Wireframe render mode"		eEvent	eRenderWireframe)

				(toolbar_togglebutton false "24x24/normals.png" "Normals" 
					"Normals render mode"		eEvent	eRenderNormals)

				(toolbar_togglebutton false "24x24/solid.png" "Faces"
					"Solid face render mode"		eRenderFace	eRenderFace)

				(toolbar_togglebutton false "24x24/texture.png" "Texture" 
					"Texture toggle"	eRenderTexture	eRenderTexture)

				(toolbar_togglebutton false "24x24/light.png" "Light" 
					"Lighting toggle"		eEvent	eRenderLighting)

				(toolbar_togglebutton false "24x24/bvol.png" "BoundingBox"
					"Render Bounding boxes"	eEvent	eRenderBbox)

				(toolbar_togglebutton false "24x24/bone-tag.png" "Bones"
					"Show bones when rendering"		eEvent	eRenderSkeleton)

				(toolbar_togglebutton false "24x24/grid.png" "Grid"
					"Toggle plane grid rendering"	eEvent eRenderGrid)

				(toolbar_togglebutton false "24x24/pickray.png" "Pick Ray"
					"Toggle pick ray rendering"	eEvent eRenderPickRay)

				(toolbar_togglebutton false "24x24/shadow.png" "Shadow"
					"Render shadows"		eEvent	eRenderShadow)

				(toolbar_togglebutton false "24x24/deform.png" "Deform"
					"Toggle skelmesh deform"	eEvent	eSkeletalDeform)

				(toolbar_togglebutton false "24x24/fourwin.png" "Deform"
					"Enable four window view"	eEvent	eViewports)

			) ; End toolbar
		)

			(tab "Create" eNone
				(toolbar
					(toolbar_button "24x24/cube.png"	" "	
						"Polygon cube"	eEvent	eGenerateCube)

					(toolbar_button "24x24/plane.png"	" "
						"Polygon plane"	eEvent	eGeneratePlane)

					(toolbar_button "24x24/tube.png"	" "
						"Polygon tube"	eEvent	eGenerateTube)

					(toolbar_button "24x24/circle.png"	" "
						"Polygon circle" eEvent	eGenerateCircle)

					(toolbar_button "24x24/cone.png"	" "
						"Polygon cone" eEvent	eGenerateCone)

					(toolbar_button "24x24/cylinder.png" " "	
						"Polygon cylinder" eEvent eGenerateCylinder)

					(toolbar_button "24x24/sphere.png"	" "	
						"Polygon sphere"	eEvent	eGenerateSphere)

					(toolbar_button "24x24/patch.png"	" "
						"Polygon patch"	eEvent	eNone)

					;(toolbar_button "24x24/extrude.png"
					;	" "	"Extrude face"	eEvent eExtrude)
				)
			)

			(tab "Modify" eNone
			; Need to group toggles like radio buttons
			(toolbar
				(toolbar_togglebutton false	"24x24/bbox-select.png" "SelectB"
					"Select by bounding box" eEvent eSelectionByBox)

				(toolbar_togglebutton true "24x24/cursor-select.png" "Select" 
					"Select object by cursor" eEvent	eSelect)

				(toolbar_togglebutton false "24x24/move.png" "Move" 
					"Move object" eEvent	eMoveObject)

				(toolbar_togglebutton false "24x24/rotate.png" "Rotate" 
					"Rotate object" eEvent	eRotateObject)

				(toolbar_togglebutton false "24x24/scale.png" "Scale" 
					"Scale object" eEvent	eScaleObject)

				(toolbar_togglebutton false "24x24/clone.png" "CopyM"
					"Copy multiple objects" eEvent eCopyAppendMode)

				(toolbar_button	"24x24/split.png"
					"Split" "Split object" eEvent eSplitObject)
			)
		))
		) ; End Toolbars


		;; Main window body ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
		(hbox 0 1 1 1 1



			;; GL window
			(gl_widget WIDTH HEIGHT)

			;; Sidebar notebook in non-expanding container
			(handlebox 1   ;; (hbox 0 1 0 1 1
			(notebook NOTEBOOK_WIDTH NOTEBOOK_HEIGHT eEvent

				;; Model tab
				(tab "Model" eModeModel

					(hbox 1 1 0 1 1
						(toolbar 
							(toolbar_button "gtk-new" "New"	
								"New model"		eEvent eNewFile)

							(filechoosertoolbar_button 
								"gtk-open" "Open" "Loads model file" 
								"Open Model..." eOpenModel "mode=open")

							(filechoosertoolbar_button 
								"gtk-save-as" "Save as..." "Saves model file" 
								"Save Model..." eSaveModel "mode=save,confirm-overwrite=true,")


							;(toolbar_togglebutton false
							;	"24x24/bbox-select.png" "Select" "Select by bounding box" 
							;	eEvent eSelectionByBox)

							;(toolbar_togglebutton false 
							;	"24x24/clone.png" "CopyM"	"Copy multiple objects" 
							;	eEvent eCopyAppendMode)

							;(toolbar_button
							;	"24x24/split.png" "Split" "Split object" 
							;	eEvent eSplitObject)

							;(toolbar_button
							;	"24x24/texmap.png" "TexelGen" "Texture Map, XY Plane"
							;	eEvent eTextureMapProjection)
						))

					;; Seperator
					(hbox 1 0 0 1 0 (hsep))

					;; Plane selector ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
					(hbox 1 0 0 1 0
						(label "Select view: "  0.0 0.5)
						(optionmenu	eEvent	eNone
							(menu_item	"Orbit"	eEvent	eViewportOrbit)
							(menu_item	"Front"	eEvent	eViewportFront)
							(menu_item	"Back"	eEvent	eViewportBack)
				  			(menu_item	"Right"	eEvent	eViewportRight)
				  			(menu_item	"Left"	eEvent	eViewportLeft)
				  			(menu_item	"Top"	eEvent	eViewportTop)
				  			(menu_item	"Bottom" eEvent eViewportBottom)
						) ; optionmenu
					) ; hbox

				(hbox 1 0 0 1 0
					;; This really adjusts view height ( removing feature soon )
					;(label "  View Height "  0.0 0.4) 
					;(spinbutton2 1.0 1.0 10.0 1.0 1.0 1.0 1 eSetZoomLevel)

					(label "  Zoom "  0.0 0.4) 
					(spinbutton2 0.1 0.0001 1000.0 0.0001 0.001 0.001 4 eZoom)
				) ; hbox

					;; Object operations ;;;;;;;;;;;;;;;;;;;;;;;;;;;
					(hbox 1 0 0 1 0 (hsep))
					(hbox 0 0 0 1 0
						(label "Object operations" 0.0 0.5))
					;(hbox 1 0 0 1 0
					;	(label "Current Mesh  #"  0.0 0.5) 
					;	(spinbutton 0 0 100 eMeshIterator))
					;(hbox 1 0 0 1 0
					;	(label "Current Group #" 0.0 0.5) 
					;	(spinbutton 0 0 500 eGroupIterator))
					;(hbox 1 0 0 1 0
					;	(label "Current Face #" 0.0 0.5) 
					;	(spinbutton 0 0 500 ePolygonIterator))

					;(hbox 1 0 0 1 0
					;	(button "New"     eEvent  eAddObject)
					;	(button "Delete"  eEvent  eDelete))

					(hbox 1 0 0 1 0 (hsep))

					(hbox 1 0 0 1 0
						(label "Transform: " 0.0 0.5))

					(hbox 1 0 0 1 0
						
						(optionmenu	eEvent	eTransformMenu
							(menu_item	"Model"		eEvent	eTransformModel)
							(menu_item	"Mesh"		eEvent eTransformMesh)
							(menu_item	"Selected Meshes"	eEvent eNone);eTransformSelectedMeshes)
							(menu_item	"Face"		eEvent eTransformFace)
							(menu_item	"Selected Faces"	eEvent eNone);eTransformSelectedFaces)
							(menu_item	"Vertex"	eEvent eTransformPoint)
							(menu_item	"Selected Vertices"	eEvent eTransformSelectedVertices)
							(menu_item	"Bone"		eEvent eTransformBone)
							(menu_item	"Group"		eEvent eTransformGroup)
						) ; optionmenu

						(optionmenu	eEvent	eObjectMenu
							(menu_item "Move"    eEvent	eMoveObject)
				  			(menu_item "Rotate"  eEvent	eRotateObject)
				  			(menu_item "Scale"   eEvent	eScaleObject)
				  			(menu_item "Select"  eEvent	eSelect)
				  			(menu_item "Unselect"  eEvent	eUnselect)
						) ; optionmenu
					) ; hbox

					(hbox 1 0 0 1 0 (hsep))

					;; Generic Transform box
					(hbox 1 1 0 1 1
						(button "Move" eEvent eMove)
						(spinbutton2 0.0 -10000.0 10000.0 0.1 0.1 0.1 1 eMove_X)
						(spinbutton2 0.0 -10000.0 10000.0 0.1 0.1 0.1 1 eMove_Y)
						(spinbutton2 0.0 -10000.0 10000.0 0.1 0.1 0.1 1 eMove_Z))

					(hbox 1 1 0 1 1
						(button "Rotate" eEvent eRotate)
						(spinbutton2 0.0 -180.0 180.0 0.01 0.1 0.1 2 eRotate_X)
						(spinbutton2 0.0 -180.0 180.0 0.01 0.1 0.1 2 eRotate_Y)
						(spinbutton2 0.0 -180.0 180.0 0.01 0.1 0.1 2 eRotate_Z))

					(hbox 1 1 0 1 1
						(button "Scale" eEvent eScale)
						(spinbutton2 1.0 0.0 20.0 0.01 0.1 0.1 2 eScale_X)
						(spinbutton2 1.0 0.0 20.0 0.01 0.1 0.1 2 eScale_Y)
						(spinbutton2 1.0 0.0 20.0 0.01 0.1 0.1 2 eScale_Z))

					;; Seperator
					(hbox 1 0 0 1 0 (hsep))

	
					;; Skeleton ;;;;;;;;;;;;;;;

					;; Skeleton attribute editor  
					(hbox 1 0 0 1 0 (hsep))
					(hbox 1 0 0 1 0
						(label "Skeleton" 0.0 0.5))

					; Make a UID string for trees later so to be fully generic
					(tree eBoneIterator eSetCurrentBoneName)
					;; Replace these with improved tree support
					(hbox 0 0 0 1 0
						(hbox 1 0 0 1 0
							(label "Bone: " 0.0 0.5))
						(spinbutton 0 0 100 eBoneIterator)
						(textbox eSetCurrentBoneName))

					;; Animation ;;;;;;;;;;;;;;;

					;; Seperator
					(hbox 1 0 0 1 0 (hsep))

					

					

	;; Animation bar
   	(handlebox 1 
		(vbox 0 0 0 1 0	

			(hbox 0 1 0 1 0
				(hslider eAnimationSlider 0 100))

			(hbox 0 1 0 1 0
				(toolbar
					(toolbar_togglebutton false "gtk-media-record"
						"Auto" "Auto Keyframe" eEvent eModeAutoKeyframe)
					(toolbar_button "24x24/key.png"
						"Set" "Set Keyframe" eEvent eSetKeyFrame)
					(toolbar_button  "gtk-media-previous" ;"gtk-goto-first" 
						"Prev" "Previous" eEvent eAnimationPrev)
					(toolbar_button "gtk-media-rewind"
						"?" "?" eEvent eNone)
					(toolbar_button "gtk-media-play" ;"gtk-go-forward" 	
						"Play" "Play" eEvent eAnimationPlay)
					(toolbar_button "gtk-media-stop" ;"gtk-stop" 	
						"Stop" "Stop" eEvent eAnimationStop)
					(toolbar_button "gtk-media-forward"
						"?" "?" eEvent eNone)
					(toolbar_button "gtk-media-next" ;"gtk-goto-last" 	
						"Next" "Next" eEvent eAnimationNext)))
		) ;; vbox
	) ;; End Animation handlebox

			)  ;; end tab Model


			;; UV editor tab
			(tab "UV" eModeUV
				(hbox 1 0 0 1 0 
					(togglebutton "Merge Texcoords" 0 eEvent eTexcoordCombine))
				(hbox 1 0 0 1 0
					(button "Set Mesh Material" eEvent eSetMeshTexture))

				(hbox 1 0 0 1 0
					(button "Set Selected Faces Material" eEvent eSetFacesMaterial))
					 
				(hbox 1 0 0 1 0 
					(label "Material index: " 0.0 0.5) 
					(spinbutton 0 0 100 503))

				(hbox 1 0 0 1 0
					(label "Face index:" 0.0 0.5) 
					(spinbutton 0 0 100000 ePolygonIterator))

				(hbox 1 0 0 1 0
					(label "Mesh index: " 0.0 0.5) 
					(spinbutton 0 0 1000 eMeshIterator))

				;; Per face editing
				(hbox 1 1 0 1 1	(label "Face operations" 0.0 0.5))
				(hbox 1 1 0 1 1	(hsep))
				(hbox 1 0 0 1 0
					(vbox 1 0 0 1 0
						(button "Set material" eEvent eSetPolygonTexture)
						(button "Generate UVMap" eEvent eTmpUVMapOn)
						(button "Clear UVMap" eEvent eTmpUVMapOff)
						(button "PolyMap"	eEvent	ePolyMapTexturePolygon)
						(button "Mirror X" eEvent eMirrorUV_X)
						(button "Mirror Y" eEvent eMirrorUV_Y)
						(button "Flag alpha" eEvent eCurrentFaceFlagAlpha))))


				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
				;; Material tab 
				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

				(tab "Material" eModeMaterial

					(hbox 1 1 0 1 1
						(toolbar
							(toolbar_button "gtk-new" "New"
								"New material"			eEvent	eNewFile)
							(filechoosertoolbar_button 
								"gtk-open" "Open" "Loads material file" 
								"Open Material..." eOpenMaterial "mode=open")
							(filechoosertoolbar_button 
								"gtk-save-as" "Save as..." "Saves material file" 
								"Save Material..." eSaveMaterial "mode=save,confirm-overwrite=true,"))

						(togglebutton "Slot Load" 0 eEvent eMaterialSlotLoadToggle))


					;; Material selector / name editor
					(hbox 0 1 0 1 1
						(label "Material Select" 0.0 0.5))
					(hbox 0 1 0 1 1
						;;(label "Name" 0.0 0.5)
						(spinbutton 0 0 1024 eSelectMaterial)
						(textbox eSetMaterialName))

					;; Texture loader interface
					(hbox 1 0 0 1 0 (hsep))
					(hbox 0 1 0 1 1
						(label "Material Textures" 0.0 0.5))
					(hbox 0 1 0 1 1
						(spinbutton 0 0 128 eSetMaterialTexture)
						(textbox eSetTextureNameA)
						(togglebutton "Slot" 0 eEvent eTextureSlotLoadToggle)
						(filechooserbutton "..." "Open Texture..." eOpenTexture "texture_pattern")
					)

					(hbox 0 1 0 1 1
						(spinbutton 0 0 128 eSetMaterialTextureB)
						(textbox eSetTextureNameB)
						(togglebutton "Slot" 0 eEvent eTextureSlotLoadToggleB)
						(filechooserbutton "..." "Open TextureB..." eOpenTextureB "texture_pattern")
					)

					(hbox 1 0 0 1 0 (hsep))

					(hbox 1 1 0 1 1
						(label "Ambient" 0.0 0.5))

					(hbox 1 1 0 1 1
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 700)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 701)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 702)
						(spinbutton2 1.0 0.0 1.0 0.01 0.1 0.1 3 703)
						(colorbutton 1 eColorMaterialAmbient))

					(hbox 1 1 0 1 1
						(label "Diffuse" 0.0 0.5))
 
					(hbox 1 1 0 1 1
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 704)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 705)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 706)
						(spinbutton2 1.0 0.0 1.0 0.01 0.1 0.1 3 707)
						(colorbutton 1 eColorMaterialDiffuse))

					(hbox 1 1 0 1 1
						(label "Specular" 0.0 0.5))

					(hbox 1 1 0 1 1
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 708)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 709)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 710)
						(spinbutton2 1.0 0.0 1.0 0.01 0.1 0.1 3 711)
						(colorbutton 1 eColorMaterialSpecular))

					(hbox 1 1 0 1 1
						(label "Emissive" 0.0 0.5))

					(hbox 1 1 0 1 1
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 712)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 713)
						(spinbutton2 0.0 0.0 1.0 0.01 0.1 0.1 3 714)
						(spinbutton2 1.0 0.0 1.0 0.01 0.1 0.1 3 715)
						(colorbutton 1 eColorMaterialEmissive))

					(hbox 1 1 0 1 1
						(label "Shininess" 0.0 0.5)
						(spinbutton2 1.0 0.0 100.0 0.01 0.1 0.1 3 716))

					(hbox 1 0 0 1 0
						(label "Source" 0.0 0.5))

					(hbox 1 0 0 1 0
						(optionmenu eEvent 780
							(menu_item "GL__ZERO"
								eEvent 1000)
							(menu_item "GL__ONE"
								eEvent 1001)
							(menu_item "GL__SRC__COLOR"
								eEvent 1002)
							(menu_item "GL__ONE__MINUS__SRC__COLOR"
								eEvent 1003)
							(menu_item "GL__DST__COLOR"
								eEvent 1004)
							(menu_item "GL__ONE__MINUS__DST__COLOR"
								eEvent 1005)
							(menu_item "GL__SRC__ALPHA"
								eEvent 1006)
							(menu_item "GL__ONE__MINUS__SRC__ALPHA"
								eEvent 1007)
							(menu_item "GL__DST__ALPHA"
								eEvent 1008)
							(menu_item "GL__ONE__MINUS__DST__ALPHA"
								eEvent 1009)
							(menu_item "GL__SRC__ALPHA__SATURATE"
								eEvent 1010)
							(menu_item "GL__CONSTANT__COLOR"
								eEvent 1011)
							(menu_item "GL__ONE__MINUS__CONSTANT__COLOR"
								eEvent 1012)
							(menu_item "GL__CONSTANT__ALPHA"
								eEvent 1013)
							(menu_item "GL__ONE__MINUS__CONSTANT__ALPHA" 
								eEvent 1014)))

					(hbox 1 0 0 1 0
						(label "Dest" 0.0 0.5))

					(hbox 1 0 0 1 0
						(optionmenu eEvent 781
							(menu_item "GL__ZERO" 
								eEvent 2000)
							(menu_item "GL__ONE"
								eEvent 2001)
							(menu_item "GL__SRC__COLOR" 
								eEvent 2002)
							(menu_item "GL__ONE__MINUS__SRC__COLOR"
								eEvent 2003)
							(menu_item "GL__DST__COLOR"
								eEvent 2004)
							(menu_item "GL__ONE__MINUS__DST__COLOR"
								eEvent 2005)
							(menu_item "GL__SRC__ALPHA"
								eEvent 2006)
							(menu_item "GL__ONE__MINUS__SRC__ALPHA"
								eEvent 2007)
							(menu_item "GL__DST__ALPHA"
								eEvent 2008)
							(menu_item "GL__ONE__MINUS__DST__ALPHA"
								eEvent 2009)
							(menu_item "GL__SRC__ALPHA__SATURATE"
								eEvent 2010)
							(menu_item "GL__CONSTANT__COLOR"
								eEvent 2011)
							(menu_item "GL__ONE__MINUS__CONSTANT__COLOR"
								eEvent 2012)
							(menu_item "GL__CONSTANT__ALPHA"
								eEvent 2013)
							(menu_item "GL__ONE__MINUS__CONSTANT__ALPHA" 
								eEvent 2014)))

					(hbox 1 0 0 1 0
						(vbox 1 0 0 1 0
							(togglebutton "Texture" 0 eEvent eMaterialTex)
							(togglebutton "Detail texture" 0 eEvent eMaterialMultiTex))

					(vbox 1 0 0 1 0
						(togglebutton "GL_NORMALIZE" 0 eEvent eOpenGLNormalize)
						(togglebutton "GL_BLEND" 0 eEvent eOpenGLBlend))))

)
)
)

	;; a box here would be under the tabs and the main window


	) ;; vbox
)  ;; Window

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Dialogs
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(dialog "Freyja :: Help" eHelpDialog 0
	(vbox 0 0 0 0 0
		(label2 "
 If you'd like to work on documentation email me.  

 Help, bug reports, and feature requests:

	· http://icculus.org/freyja

	· http://icculus.org/freyja/forum.html

	· irc://irc.freenode.net/#freyja

	· mongooseichiban@gmail.com

")

		(label2 "		<u>Common keys</u>

 · F4 - Extrude 
 · F5 - Move 		· Ctrl  (held) - tSelect 
 · F6 - Rotate 		· Shift (held) - tUnSelect
 · F7 - Scale

")

	) ; vbox
) ; dialog


(dialog "Freyja :: About" eAboutDialog 0
	(vbox 0 0 0 0 0
		(hbox 1 0 0 1 0
			(icon "freyja.png" IconSize_Dialog))
		(hbox 1 0 0 1 0 
			(label2 " <big>Freyja 0.9.5 Development Branch</big>
 Freyja is an Open Source 3d modeling system.
 This build is from the development branch.

 	· mongooseichiban@gmail.com ·

 <small>Freyja Copyright © 2002-2006 by Terry 'Mongoose' Hendrix II </small>")) 
	) ; vbox
) ; dialog

;(dialog "Freyja :: 趣味" ePreferencesDialog 0
(dialog "Freyja :: Preferences" ePreferencesDialog 0

	(vbox 0 0 0 0 0

	(notebook 0 0 eNop
		(tab "General" eNone

		;(hbox 1 0 0 1 0
		;	(icon "freyja.png" IconSize_Dialog))

		;;(hbox 1 0 0 1 0
		;;	(label "Near Height "  0.0 0.5) 
		;;	(spinbutton2 20.0 20.0 60.0 20.0 20.0 20.0 3 eSetNearHeight))

		(hbox 1 0 0 1 0
			(label "Render scaling"  0.0 0.5) 
			(spinbutton2 0.1 0.0001 1000.0 0.0001 0.001 0.001 4 eZoom))

		(hbox 1 0 0 1 0
			(label "Polygon # of sides "  0.0 0.5) 
			(spinbutton 0 3 6 ePolygonSize))

		(hbox 1 0 0 1 0
			(label "GenMesh height "  0.0 0.5) 
			(spinbutton2 8.0 1.0 100.0 0.01 0.1 0.1 3 eGenMeshHeight))

		(hbox 1 0 0 1 0
			(label "GenMesh # of partitions "  0.0 0.5) 
			(spinbutton 16 3 32 eGenMeshCount))

		(hbox 1 0 0 1 0
			(label "GenMesh # of segments "  0.0 0.5) 
			(spinbutton 4 3 32 eGenMeshSegements))

		(hbox 1 0 0 1 0
			(label "UV texcoord pick radius"  0.0 0.5) 
			(spinbutton2 0.1 0.0001 1000.0 0.0001 0.001 0.001 4 eUVPickRadius))

		(hbox 1 0 0 1 0
			(label "Vertex pick radius"  0.0 0.5) 
			(spinbutton2 0.1 0.0001 1000.0 0.0001 0.001 0.001 4 eVertexPickRadius))

		) ; End (tab "General"

		(tab "Colors" eNone

		(hbox 1 0 0 1 2 
;			(label "遠景の呈色" 0.0 0.5)
			(label "Background color " 0.0 0.5)
			(colorbutton 1 eColorBackground))

		(hbox 1 0 0 1 2 
;			(label "基底の呈色" 0.0 0.5)
			(label "Grid color " 0.0 0.5)
			(colorbutton 1 eColorGrid))

		(hbox 1 0 0 1 2 
;				(label "天頂の呈色" 0.0 0.5)
			(label "Vertex color " 0.0 0.5)
			(colorbutton 1 eColorVertex))

		(hbox 1 0 0 1 2 
;				(label "現行天頂の呈色" 0.0 0.5)
			(label "Vertex highlight " 0.0 0.5)
			(colorbutton 1 eColorVertexHighlight))

		(hbox 1 0 0 1 2 
;				(label "Meshの呈色" 0.0 0.5)
			(label "Wireframe color " 0.0 0.5)
			(colorbutton 1 eColorMesh))

		(hbox 1 0 0 1 2 
; About time to start using string tables instead of this...
;			(label (if (eq locale "jp") 
;				"現行Meshの呈色" "Mesh highlight ") 0.0 0.5)
			(label "Wireframe highlight " 0.0 0.5)
			(colorbutton 1 eColorMeshHighlight))

		(hbox 1 0 0 1 2 
			(label "Bone color " 0.0 0.5)
			(colorbutton 1 eColorBone))

		(hbox 1 0 0 1 2 
			(label "Bone highlight " 0.0 0.5)
			(colorbutton 1 eColorBoneHighlight))

		) ; End (tab "Colors"
		
		(tab "Lights" eNone
			(hbox 1 1 0 1 1
				(label "Light" 0.0 0.5)
				(label "Ambient" 0.0 0.5)
				(label "Diffuse" 0.0 0.5)
				(label "Specular" 0.0 0.5))
			(hbox 1 1 0 1 1
				;(spinbutton 0 0 100 eSelectLight)
				(colorbutton 1 eColorLightAmbient)
				(colorbutton 1 eColorLightDiffuse)
				(colorbutton 1 eColorLightSpecular))
			(hbox 1 1 0 1 1
				(spinbutton 0.0 -10000.0 10000.0 eLightPosX)
				(spinbutton 0.0 -10000.0 10000.0 eLightPosY)
				(spinbutton 0.0 -10000.0 10000.0 eLightPosZ)))

		
		(tab "Cameras" eNone
			)

) ; End Notebook
))) ;; End Preferences dialog


;; All these could be factored into init.mlisp

;; Custom colors -- After widgets so widgets can be updated to match 
;  all widgets with this properity
(color	eColorBackground		0.5	0.5	0.5	1.0) 
(color	eColorGrid				0.4	0.4	0.4	0.9)
(color	eColorMesh				0.0	0.0	0.0	1.0)
(color	eColorMeshHighlight		0.2	0.2	1.0	1.0)
(color	eColorVertex			0.2	1.0	1.0	1.0)
(color	eColorVertexHighlight	1.0	0.0	0.86 1.0)
(color	eColorBone				0.882352941 0.654901961 0.219607843 1.0)
(color	eColorBoneHighlight		0.956862745 0.415686275 0.2 1.0)
(color	eColorLightAmbient		0.8 0.8 0.8 1.0)
(color	eColorLightDiffuse		0.8 0.8 0.8 1.0)
(color	eColorLightSpecular		0.8 0.8 0.8 1.0)

; Custom 'toggles'
(func_set_toggle	eRenderGrid	1)
(func_set_toggle	eRenderFace	1)
(func_set_toggle	eRenderTexture	1)
(func_set_toggle	eRenderLighting	1)
(func_set_toggle	eRenderMaterial	1)
(func_set_toggle	eRenderBbox	1)
(func_set_toggle	eRenderSkeleton	1)
(func_set_toggle	eRenderPickRay	1)
(func_set_toggle	ePointJoint	1)
(func_set_toggle	eLineBone	1)




